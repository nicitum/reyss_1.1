<!doctype html>
<html>

<head>
    <title>Checkout Demo</title>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1" />
    <script src="https://www.paynimo.com/paynimocheckout/client/lib/jquery.min.js" type="text/javascript"></script>
</head>

<body>

    <button id="btnSubmit">Proceed to Pay</button>

    <script type="text/javascript" src="https://www.paynimo.com/paynimocheckout/server/lib/checkout.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            function handleResponse(res) {
                if (typeof res != "undefined" && typeof res.paymentMethod != "undefined" && typeof res.paymentMethod.paymentTransaction != "undefined" && typeof res.paymentMethod.paymentTransaction.statusCode != "undefined" && res.paymentMethod.paymentTransaction.statusCode == "0300") {
                    // success block
                } else if (typeof res != "undefined" && typeof res.paymentMethod != "undefined" && typeof res.paymentMethod.paymentTransaction != "undefined" && typeof res.paymentMethod.paymentTransaction.statusCode != "undefined" && res.paymentMethod.paymentTransaction.statusCode == "0398") {
                    // initiated block
                } else {
                    // error block
                }
            };

            $(document).off("click", "#btnSubmit").on("click", "#btnSubmit", function(e) {
                e.preventDefault();

                var reqJson = {
                    "features": {
                        "enableAbortResponse": true,
                        "enableExpressPay": true,
                        "enableInstrumentDeRegistration" : true,
                        "enableMerTxnDetails": true,
                        "enableNewWindowFlow": true 
                    },
                    "consumerData": {
                        "deviceId": "WEBSH2",    //possible values "WEBSH1" or "WEBSH2"
						//merchantId|txnId|totalamount|accountNo|consumerId|consumerMobileNo|consumerEmailId|debitStartDate|debitEndDate|maxAmount|amountType|frequency|cardNumber|expMonth|expYear|cvvCode|SALT
						//T1071800|TXNo1tr2uyyw1|1||c964634||||||||||||7685617431RBIUGE
                        "token": "dce6c8bb6d0f6da21a86fccb8ce8df913fe386228875b0f43c2384d0c64293e9c623c95faaea2d03bf0b1314f7530b63e6e8bcfed71c6419df95e137695f9be0",
                        "returnUrl": "http://192.168.1.13:8090/payment-response",    //merchant response page URL
                        "responseHandler": handleResponse,
                        "paymentMode": "all",
                        "merchantLogoUrl": "https://www.paynimo.com/CompanyDocs/company-logo-vertical.png",  //provided merchant logo will be displayed
                        "merchantId": "T1071800",
                        "currency": "INR",
                        "consumerId": "c964634",
                        "txnId": "TXNo1tr2uyyw1",   //Unique merchant transaction ID
                        "items": [{
                            "itemId": "first",
                            "amount": "1",
                            "comAmt": "0"
                        }],
                        "customStyle": {
                            "PRIMARY_COLOR_CODE": "#45beaa",   //merchant primary color code
                            "SECONDARY_COLOR_CODE": "#FFFFFF",   //provide merchant's suitable color code
                            "BUTTON_COLOR_CODE_1": "#2d8c8c",   //merchant's button background color code
                            "BUTTON_COLOR_CODE_2": "#FFFFFF"   //provide merchant's suitable color code for button text
                        }
                    }
                };

                $.pnCheckout(reqJson);
                if(reqJson.features.enableNewWindowFlow){
                    pnCheckoutShared.openNewWindow();
                }
            });
        });
    </script>
</body>

</html>